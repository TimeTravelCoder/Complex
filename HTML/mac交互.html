<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¤äº’å¼å­¦ä¹ ï¼šæ‰©å±•çš„ä»¥å¤ªç½‘</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: è®¾è®¡äº†ä¸€ä¸ªå•é¡µåº”ç”¨ï¼ŒåŒ…å«é¡¶éƒ¨å¯¼èˆªï¼ŒæŒ‰é€»è¾‘åˆ’åˆ†ä¸ºå››ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼šâ€œç‰©ç†å±‚æ‰©å±•çš„æŒ‘æˆ˜â€ã€â€œæ•°æ®é“¾è·¯å±‚çš„é©å‘½ï¼šäº¤æ¢æœºâ€ã€â€œæ ¸å¿ƒäº¤äº’ï¼šäº¤æ¢æœºè‡ªå­¦ä¹ æ¨¡æ‹Ÿâ€å’Œâ€œé€»è¾‘éš”ç¦»ï¼šè™šæ‹Ÿå±€åŸŸç½‘(VLAN)â€ã€‚è¿™ç§ç»“æ„æ—¨åœ¨å¼•å¯¼ç”¨æˆ·ä»åŸºæœ¬æ¦‚å¿µï¼ˆé›†çº¿å™¨å’Œç¢°æ’åŸŸï¼‰é€æ­¥æ·±å…¥åˆ°æ›´é«˜çº§çš„ä¸»é¢˜ï¼ˆäº¤æ¢æœºã€è‡ªå­¦ä¹ ã€VLANï¼‰ã€‚é€‰æ‹©æ­¤ç»“æ„æ˜¯å› ä¸ºå®ƒéµå¾ªäº†æŠ€æœ¯æ¼”è¿›çš„è‡ªç„¶è·¯å¾„ï¼Œå¹¶é€šè¿‡æ ¸å¿ƒçš„äº¤äº’å¼æ¨¡æ‹Ÿï¼ˆäº¤æ¢æœºè‡ªå­¦ä¹ ï¼‰å°†æŠ½è±¡æ¦‚å¿µå…·ä½“åŒ–ï¼Œæå¤§åœ°å¢å¼ºäº†å¯ç”¨æ€§å’Œå­¦ä¹ æ•ˆæœã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ»šåŠ¨æˆ–å¯¼èˆªæ è‡ªç”±æ¢ç´¢ï¼Œç¬¦åˆéçº¿æ€§çš„å­¦ä¹ ä¹ æƒ¯ã€‚ -->
    <!-- Visualization & Content Choices: 1. é›†çº¿å™¨ä¸äº¤æ¢æœºå¯¹æ¯” (ç›®æ ‡: æ¯”è¾ƒ): ä½¿ç”¨HTMLè¡¨æ ¼æ¸…æ™°å¯¹æ¯”äºŒè€…åœ¨ç¢°æ’åŸŸã€å·¥ä½œæ–¹å¼ä¸Šçš„æ ¸å¿ƒå·®å¼‚ã€‚ 2. äº¤æ¢æœºè‡ªå­¦ä¹ æ¨¡æ‹Ÿ (ç›®æ ‡: ç»„ç»‡ä¸å…³ç³»): ä½¿ç”¨HTML/CSS/JSæ„å»ºåŠ¨æ€æ‹“æ‰‘å›¾å’ŒMACåœ°å€è¡¨ã€‚ç”¨æˆ·é€šè¿‡äº¤äº’ï¼ˆç‚¹å‡»å‘é€æŒ‰é’®ï¼‰è§¦å‘å¸§çš„è½¬å‘è¿‡ç¨‹ï¼ˆå¹¿æ’­æˆ–å•æ’­ï¼‰ï¼Œç›´è§‚åœ°ç†è§£äº¤æ¢æœºå¦‚ä½•â€œå­¦ä¹ â€å’Œåšå‡ºè½¬å‘å†³ç­–ã€‚è¿™æ˜¯å°†æŠ¥å‘Šä¸­å›¾3-25çš„é™æ€è¿‡ç¨‹åŠ¨æ€åŒ–çš„æœ€ä½³æ–¹æ³•ã€‚ 3. 802.1Qå¸§æ ¼å¼è§£æ (ç›®æ ‡: å‘ŠçŸ¥): ä½¿ç”¨HTML/CSSåˆ›å»ºå¸§ç»“æ„å›¾ï¼Œé€šè¿‡JSçš„æ‚¬åœäº¤äº’æ˜¾ç¤ºå„å­—æ®µï¼ˆå¦‚VIDï¼‰çš„è¯¦ç»†è§£é‡Šï¼Œä½¿ç”¨æˆ·èƒ½è½»æ¾è§£æ„å¤æ‚çš„å¸§æ ¼å¼ã€‚æ‰€æœ‰é€‰æ‹©éƒ½ä¸¥æ ¼éµå®ˆæ— SVG/Mermaidçš„è¦æ±‚ï¼Œä»¥äº’åŠ¨æ€§å’Œæ˜“ç†è§£æ€§ä¸ºé¦–è¦æ ‡å‡†ã€‚ -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #4f46e5; /* indigo-600 */
        }
        .active-link {
            color: #4f46e5; /* indigo-600 */
            border-bottom: 2px solid #4f46e5;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .frame-segment {
            transition: background-color 0.3s, transform 0.3s;
        }
        .frame-segment:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        .log-entry {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .frame-animation {
            position: absolute;
            width: 20px;
            height: 15px;
            background-color: #fb923c; /* orange-400 */
            border-radius: 4px;
            border: 1px solid #f97316; /* orange-500 */
            transition: all 1s ease-in-out;
            opacity: 0;
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-2xl font-bold text-slate-800">æ¢ç´¢æ‰©å±•çš„ä»¥å¤ªç½‘</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#section-hubs" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">ç‰©ç†å±‚æ‰©å±•</a>
                        <a href="#section-switches" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">æ•°æ®é“¾è·¯å±‚æ‰©å±•</a>
                        <a href="#section-simulation" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">äº¤æ¢æœºæ¨¡æ‹Ÿ</a>
                        <a href="#section-vlan" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-slate-600">è™šæ‹Ÿå±€åŸŸç½‘</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
        
        <!-- Section 1: Physical Layer Extension -->
        <section id="section-hubs" class="mb-20">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">1. ç‰©ç†å±‚æ‰©å±•ï¼šé›†çº¿å™¨çš„æ—¶ä»£</h2>
            <p class="text-lg text-slate-600 mb-8">æ—©æœŸçš„ä»¥å¤ªç½‘é¢ä¸´ç€è·ç¦»å’Œè®¾å¤‡æ•°é‡çš„é™åˆ¶ã€‚åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘çš„ä¸»è¦æ–¹å¼æ˜¯ä½¿ç”¨é›†çº¿å™¨ï¼ˆHubï¼‰ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹å¼è™½ç„¶ç®€å•ï¼Œå´å¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼šç¢°æ’åŸŸçš„æ‰©å¤§ã€‚æœ¬èŠ‚å°†æ¢è®¨é›†çº¿å™¨çš„å·¥ä½œåŸç†åŠå…¶å›ºæœ‰çš„å±€é™æ€§ã€‚</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div class="card p-8">
                    <h3 class="text-2xl font-semibold mb-4 text-indigo-600">é›†çº¿å™¨ (Hub)</h3>
                    <p class="mb-4">é›†çº¿å™¨å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œå…¶åŠŸèƒ½ç±»ä¼¼ä¸€ä¸ªå¤šæ¥å£çš„ä¿¡å·æ”¾å¤§å™¨å’Œè½¬å‘å™¨ã€‚å½“ä¸€ä¸ªæ¥å£æ”¶åˆ°æ•°æ®ä¿¡å·æ—¶ï¼Œå®ƒä¼šå°†ä¿¡å·æ•´å½¢ã€æ”¾å¤§ï¼Œç„¶åä¸åŠ åˆ†è¾¨åœ°è½¬å‘åˆ°**æ‰€æœ‰å…¶ä»–**æ¥å£ã€‚</p>
                    <div class="text-center">
                        <div class="inline-block bg-slate-100 p-4 rounded-lg">
                            <span class="text-6xl">ğŸ“ </span>
                            <p class="mt-2 font-semibold">ä¿¡å·ä¸­ç»§å™¨</p>
                        </div>
                    </div>
                </div>
                <div class="card p-8 bg-red-50 border border-red-200">
                    <h3 class="text-2xl font-semibold mb-4 text-red-600">ç¼ºç‚¹ï¼šç¢°æ’åŸŸçš„æ‰©å¤§</h3>
                    <p class="mb-4">ä½¿ç”¨é›†çº¿å™¨è¿æ¥çš„è®¾å¤‡å…±äº«åŒä¸€ä¸ªå¸¦å®½ï¼Œå¹¶æ„æˆä¸€ä¸ª**å•ä¸€çš„ç¢°æ’åŸŸ**ã€‚è¿™æ„å‘³ç€åœ¨ä»»ä½•æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªè®¾å¤‡å¯ä»¥å‘é€æ•°æ®ã€‚å¦‚æœä¸¤ä¸ªè®¾å¤‡åŒæ—¶å‘é€ï¼Œå°±ä¼šå‘ç”Ÿç¢°æ’ï¼Œå¯¼è‡´æ•°æ®ä¼ è¾“å¤±è´¥ã€‚è¿æ¥çš„è®¾å¤‡è¶Šå¤šï¼Œç¢°æ’çš„æ¦‚ç‡è¶Šå¤§ï¼Œç½‘ç»œæ•ˆç‡æ€¥å‰§ä¸‹é™ã€‚</p>
                     <div class="text-center">
                        <div class="inline-block bg-red-100 p-4 rounded-lg">
                            <span class="text-6xl">ğŸ’¥</span>
                            <p class="mt-2 font-semibold">å•ä¸€ç¢°æ’åŸŸ</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Data Link Layer Extension -->
        <section id="section-switches" class="mb-20">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">2. æ•°æ®é“¾è·¯å±‚é©å‘½ï¼šä»¥å¤ªç½‘äº¤æ¢æœº</h2>
            <p class="text-lg text-slate-600 mb-8">ä¸ºäº†å…‹æœé›†çº¿å™¨çš„å±€é™æ€§ï¼Œä»¥å¤ªç½‘äº¤æ¢æœºï¼ˆSwitchï¼‰åº”è¿è€Œç”Ÿã€‚äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå®ƒèƒ½æ™ºèƒ½åœ°å¤„ç†æ•°æ®å¸§ï¼Œæå¤§åœ°æå‡äº†ç½‘ç»œæ€§èƒ½å’Œæ•ˆç‡ã€‚äº¤æ¢æœºçš„å‡ºç°æ˜¯å±€åŸŸç½‘å‘å±•å²ä¸Šçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ã€‚</p>
            <div class="card p-8">
                <h3 class="text-2xl font-semibold mb-6 text-center">é›†çº¿å™¨ vs. ä»¥å¤ªç½‘äº¤æ¢æœº</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr>
                                <th class="py-3 px-4 bg-slate-100 font-semibold text-sm text-slate-600 border-b border-slate-200">ç‰¹æ€§</th>
                                <th class="py-3 px-4 bg-slate-100 font-semibold text-sm text-slate-600 border-b border-slate-200">é›†çº¿å™¨ (Hub)</th>
                                <th class="py-3 px-4 bg-slate-100 font-semibold text-sm text-slate-600 border-b border-slate-200">ä»¥å¤ªç½‘äº¤æ¢æœº (Switch)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="hover:bg-slate-50">
                                <td class="py-3 px-4 border-b border-slate-200 font-medium">å·¥ä½œå±‚æ¬¡</td>
                                <td class="py-3 px-4 border-b border-slate-200">ç‰©ç†å±‚</td>
                                <td class="py-3 px-4 border-b border-slate-200">æ•°æ®é“¾è·¯å±‚</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="py-3 px-4 border-b border-slate-200 font-medium">æ•°æ®å¤„ç†æ–¹å¼</td>
                                <td class="py-3 px-4 border-b border-slate-200">ä¿¡å·å¹¿æ’­</td>
                                <td class="py-3 px-4 border-b border-slate-200">æ ¹æ®MACåœ°å€è½¬å‘å¸§</td>
                            </tr>
                             <tr class="hover:bg-slate-50">
                                <td class="py-3 px-4 border-b border-slate-200 font-medium">ç¢°æ’åŸŸ</td>
                                <td class="py-3 px-4 border-b border-slate-200">æ‰€æœ‰æ¥å£åœ¨åŒä¸€ç¢°æ’åŸŸ</td>
                                <td class="py-3 px-4 border-b border-slate-200">æ¯ä¸ªæ¥å£æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¢°æ’åŸŸ</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="py-3 px-4 border-b border-slate-200 font-medium">å¸¦å®½</td>
                                <td class="py-3 px-4 border-b border-slate-200">å…±äº«å¸¦å®½</td>
                                <td class="py-3 px-4 border-b border-slate-200">ç‹¬äº«å¸¦å®½</td>
                            </tr>
                            <tr class="hover:bg-slate-50">
                                <td class="py-3 px-4 border-b border-slate-200 font-medium">å·¥ä½œæ¨¡å¼</td>
                                <td class="py-3 px-4 border-b border-slate-200">åŠåŒå·¥</td>
                                <td class="py-3 px-4 border-b border-slate-200">å…¨åŒå·¥</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Section 3: Switch Simulation -->
        <section id="section-simulation" class="mb-20">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">3. äº¤äº’å¼æ¨¡æ‹Ÿï¼šäº¤æ¢æœºçš„è‡ªå­¦ä¹ è¿‡ç¨‹</h2>
            <p class="text-lg text-slate-600 mb-8">ä»¥å¤ªç½‘äº¤æ¢æœºæœ€ç¥å¥‡çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒçš„â€œè‡ªå­¦ä¹ â€èƒ½åŠ›ã€‚å®ƒèƒ½è‡ªåŠ¨æ„å»ºå’Œç»´æŠ¤ä¸€ä¸ªMACåœ°å€è¡¨ï¼Œè®°å½•æ¯ä¸ªè®¾å¤‡è¿æ¥åœ¨å“ªä¸ªæ¥å£ã€‚é€šè¿‡ä¸‹é¢çš„æ¨¡æ‹Ÿå™¨ï¼Œæ‚¨å¯ä»¥äº²èº«ä½“éªŒè¿™ä¸€è¿‡ç¨‹ã€‚è¯·é€‰æ‹©æºä¸»æœºå’Œç›®çš„ä¸»æœºï¼Œç„¶åç‚¹å‡»â€œå‘é€æ•°æ®å¸§â€ï¼Œè§‚å¯Ÿäº¤æ¢æœºçš„è¡Œä¸ºå’ŒMACåœ°å€è¡¨çš„å˜åŒ–ã€‚</p>
            <div class="card p-8">
                <div class="grid lg:grid-cols-2 gap-8">
                    <!-- Simulation Diagram -->
                    <div id="simulation-diagram" class="relative bg-slate-100 rounded-lg p-6 min-h-[400px] flex items-center justify-center">
                        <!-- Switch -->
                        <div id="switch-box" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-700 text-white w-32 h-48 rounded-lg flex flex-col items-center justify-center shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mb-2"><path d="M16.5 16.5m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0"/><path d="M16.5 4.5m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0"/><path d="M4.5 16.5m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0"/><path d="M4.5 4.5m-3 0a3 3 0 1 0 6 0a3 3 0 1 0-6 0"/><path d="M13.5 6.5l-3 0"/><path d="M13.5 17.5l-3 0"/><path d="M6.5 13.5l0-3"/><path d="M17.5 13.5l0-3"/></svg>
                            <span class="font-bold">äº¤æ¢æœº</span>
                        </div>
                        <!-- Hosts -->
                        <div id="host-A" class="host-box absolute" style="top: 20%; left: 10%;">A</div>
                        <div id="host-B" class="host-box absolute" style="top: 20%; right: 10%;">B</div>
                        <div id="host-C" class="host-box absolute" style="bottom: 20%; left: 10%;">C</div>
                        <div id="host-D" class="host-box absolute" style="bottom: 20%; right: 10%;">D</div>
                        <!-- Lines -->
                        <svg class="absolute top-0 left-0 w-full h-full" id="lines-svg">
                           <!-- Lines will be drawn by JS -->
                        </svg>
                    </div>

                    <!-- Controls and Table -->
                    <div>
                        <div class="bg-slate-50 p-6 rounded-lg mb-6">
                            <h4 class="font-semibold text-lg mb-4">æ§åˆ¶é¢æ¿</h4>
                            <div class="grid sm:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label for="source-host" class="block text-sm font-medium text-slate-700">æºä¸»æœº:</label>
                                    <select id="source-host" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                                        <option>A</option>
                                        <option>B</option>
                                        <option>C</option>
                                        <option>D</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="dest-host" class="block text-sm font-medium text-slate-700">ç›®çš„ä¸»æœº:</label>
                                    <select id="dest-host" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                                        <option>B</option>
                                        <option>A</option>
                                        <option>C</option>
                                        <option>D</option>
                                    </select>
                                </div>
                            </div>
                            <button id="send-frame-btn" class="w-full bg-indigo-600 text-white font-bold py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors">å‘é€æ•°æ®å¸§</button>
                             <button id="reset-sim-btn" class="w-full mt-2 bg-slate-500 text-white font-bold py-2 px-4 rounded-md hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition-colors">é‡ç½®æ¨¡æ‹Ÿ</button>
                        </div>

                        <div class="bg-slate-50 p-6 rounded-lg">
                            <h4 class="font-semibold text-lg mb-4">MACåœ°å€è¡¨ (äº¤æ¢è¡¨)</h4>
                            <table class="w-full text-left">
                                <thead>
                                    <tr>
                                        <th class="py-2 px-3 bg-slate-200 font-semibold text-sm">MACåœ°å€</th>
                                        <th class="py-2 px-3 bg-slate-200 font-semibold text-sm">æ¥å£</th>
                                    </tr>
                                </thead>
                                <tbody id="mac-table-body">
                                    <!-- Rows will be added by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                 <div class="mt-8 bg-gray-800 text-white rounded-lg p-4 font-mono text-sm max-h-48 overflow-y-auto">
                    <h4 class="font-bold text-gray-400 mb-2">äº‹ä»¶æ—¥å¿—:</h4>
                    <div id="simulation-log"></div>
                </div>
            </div>
        </section>
        
        <!-- Section 4: VLAN -->
        <section id="section-vlan" class="mb-12">
            <h2 class="text-3xl font-bold tracking-tight text-slate-900 mb-2">4. é€»è¾‘éš”ç¦»ï¼šè™šæ‹Ÿå±€åŸŸç½‘ (VLAN)</h2>
            <p class="text-lg text-slate-600 mb-8">éšç€ç½‘ç»œè§„æ¨¡çš„æ‰©å¤§ï¼Œå•çº¯ä¾é äº¤æ¢æœºå·²æ— æ³•æ»¡è¶³å®‰å…¨å’Œç®¡ç†çš„éœ€æ±‚ã€‚è™šæ‹Ÿå±€åŸŸç½‘ï¼ˆVLANï¼‰æŠ€æœ¯åº”è¿è€Œç”Ÿï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªç‰©ç†å±€åŸŸç½‘åˆ’åˆ†æˆå¤šä¸ªé€»è¾‘ä¸Šçš„å¹¿æ’­åŸŸï¼Œä»è€Œå®ç°çµæ´»çš„è®¿é—®æ§åˆ¶å’Œé«˜æ•ˆçš„ç½‘ç»œç®¡ç†ã€‚</p>
            <div class="grid md:grid-cols-2 gap-8 items-start">
                <div class="card p-8">
                     <h3 class="text-2xl font-semibold mb-4 text-indigo-600">VLAN çš„æ ¸å¿ƒæ€æƒ³</h3>
                     <p class="mb-4">VLAN çš„æœ¬è´¨æ˜¯**é€»è¾‘åˆ†ç»„**ã€‚å®ƒå¯ä»¥å°†ä¸åŒç‰©ç†ä½ç½®ã€ä¸åŒäº¤æ¢æœºä¸‹çš„è®¾å¤‡ï¼Œé€»è¾‘ä¸Šåˆ’åˆ†åˆ°åŒä¸€ä¸ªç»„ï¼ˆåŒä¸€ä¸ªVLANï¼‰å†…ã€‚åŒä¸€VLANå†…çš„è®¾å¤‡å¯ä»¥è‡ªç”±é€šä¿¡ï¼Œä½†ä¸åŒVLANé—´çš„é€šä¿¡é»˜è®¤æ˜¯éš”ç¦»çš„ï¼Œéœ€è¦é€šè¿‡è·¯ç”±å™¨æˆ–ä¸‰å±‚äº¤æ¢æœºã€‚</p>
                     <ul class="list-disc list-inside space-y-2 text-slate-700">
                         <li><strong class="font-semibold">é™åˆ¶å¹¿æ’­åŸŸï¼š</strong> å¹¿æ’­å¸§åªåœ¨VLANå†…éƒ¨ä¼ æ’­ï¼Œæœ‰æ•ˆé˜²æ­¢å¹¿æ’­é£æš´ã€‚</li>
                         <li><strong class="font-semibold">å¢å¼ºå®‰å…¨æ€§ï¼š</strong> å¤©ç„¶éš”ç¦»ä¸åŒéƒ¨é—¨æˆ–ç”¨æˆ·ç»„çš„æµé‡ã€‚</li>
                         <li><strong class="font-semibold">æå‡çµæ´»æ€§ï¼š</strong> ç”¨æˆ·ç§»åŠ¨ä½ç½®æ— éœ€æ›´æ”¹ç½‘ç»œé…ç½®ã€‚</li>
                     </ul>
                </div>
                <div class="card p-8">
                    <h3 class="text-2xl font-semibold mb-4 text-indigo-600">802.1Q å¸§æ ¼å¼è§£æ</h3>
                    <p class="mb-6">ä¸ºäº†è®©äº¤æ¢æœºè¯†åˆ«å¸§å±äºå“ªä¸ªVLANï¼ŒIEEE 802.1Qæ ‡å‡†åœ¨ä»¥å¤ªç½‘å¸§ä¸­å¢åŠ äº†4å­—èŠ‚çš„â€œVLANæ ‡è®°â€ã€‚å°†é¼ æ ‡æ‚¬åœåœ¨ä¸‹æ–¹å¸§æ ¼å¼çš„å„ä¸ªå­—æ®µä¸ŠæŸ¥çœ‹è¯¦ç»†è§£é‡Šã€‚</p>
                    <div id="vlan-frame-container" class="flex flex-wrap text-center font-mono text-xs md:text-sm text-white select-none">
                        <div class="frame-segment p-3 border-r border-slate-400/50 flex-grow bg-slate-500" data-info="ç›®çš„åœ°å€ (6å­—èŠ‚): æ¥æ”¶æ–¹çš„MACåœ°å€ã€‚">ç›®çš„åœ°å€</div>
                        <div class="frame-segment p-3 border-r border-slate-400/50 flex-grow bg-slate-500" data-info="æºåœ°å€ (6å­—èŠ‚): å‘é€æ–¹çš„MACåœ°å€ã€‚">æºåœ°å€</div>
                        <div class="frame-segment p-3 border-r border-slate-400/50 flex-grow bg-teal-600 relative" data-info="VLANæ ‡è®° (4å­—èŠ‚): æ•´ä¸ªVLANçš„æ ¸å¿ƒæ ‡è¯†ã€‚">
                            VLAN Tag (802.1Q)
                            <div class="absolute -bottom-14 left-1/2 -translate-x-1/2 w-48 hidden md:block text-xs bg-black/70 text-white p-2 rounded-md" id="vlan-tooltip"></div>
                        </div>
                        <div class="frame-segment p-3 border-r border-slate-400/50 flex-grow bg-slate-500" data-info="ç±»å‹ (2å­—èŠ‚): æ ‡è®°ä¸Šå±‚åè®®ï¼Œå¦‚IPåè®® (0x0800)ã€‚">ç±»å‹</div>
                        <div class="frame-segment p-3 border-r border-slate-400/50 flex-auto bg-slate-600" style="min-width: 120px;" data-info="æ•°æ® (46-1500å­—èŠ‚): å®é™…æ‰¿è½½çš„ä¸Šå±‚æ•°æ®ã€‚">æ•°æ®</div>
                        <div class="frame-segment p-3 flex-grow bg-slate-500" data-info="å¸§æ£€éªŒåºåˆ— FCS (4å­—èŠ‚): CRCæ ¡éªŒç ï¼Œç”¨äºå·®é”™æ£€æµ‹ã€‚">FCS</div>
                    </div>
                     <div class="flex flex-wrap text-center font-mono text-xs md:text-sm text-white select-none mt-1">
                          <div class="p-3 border-r border-slate-400/50 flex-grow bg-gray-400" style="flex-basis: 50%;"></div>
                          <div class="p-3 border-r border-slate-400/50 flex-grow bg-sky-600 frame-segment" style="flex-basis: 25%;" data-info="TPID (2å­—èŠ‚): æ ‡è®°åè®®æ ‡è¯†ç¬¦ï¼Œå›ºå®šä¸º0x8100ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ª802.1Qå¸§ã€‚">TPID</div>
                          <div class="p-3 border-r border-slate-400/50 flex-grow bg-purple-600 frame-segment" style="flex-basis: 25%;" data-info="TCI (2å­—èŠ‚): æ ‡è®°æ§åˆ¶ä¿¡æ¯ï¼ŒåŒ…å«ä¼˜å…ˆçº§ã€CFIå’ŒVLAN IDã€‚">TCI</div>
                          <div class="p-3 border-r border-slate-400/50 flex-grow bg-gray-400" style="flex-basis: 50%;"></div>
                     </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-400 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>&copy; 2025 äº¤äº’å¼ç½‘ç»œå­¦ä¹ å¹³å°ã€‚åŸºäºã€Šè®¡ç®—æœºç½‘ç»œã€‹å†…å®¹æ„å»ºã€‚</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Navigation scroll highlighting
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 80) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-link');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active-link');
                    }
                });
            });

            // VLAN frame hover effect
            const frameSegments = document.querySelectorAll('.frame-segment');
            const tooltip = document.getElementById('vlan-tooltip');
            frameSegments.forEach(segment => {
                segment.addEventListener('mouseenter', (e) => {
                    const info = e.target.getAttribute('data-info');
                    if(info) {
                        const targetRect = e.target.getBoundingClientRect();
                        const containerRect = document.getElementById('vlan-frame-container').getBoundingClientRect();
                        tooltip.textContent = info;
                        tooltip.style.display = 'block';
                        
                        // Position tooltip relative to the main container
                        tooltip.style.left = `${targetRect.left - containerRect.left + targetRect.width / 2}px`;
                        tooltip.style.top = `${targetRect.bottom - containerRect.top + 5}px`;
                    }
                });
                segment.addEventListener('mouseleave', () => {
                   tooltip.style.display = 'none';
                });
            });


            // Switch Simulation Logic
            const hosts = {
                'A': { mac: '00-1A-2B-3C-4D-0A', port: 1, element: document.getElementById('host-A') },
                'B': { mac: '00-1A-2B-3C-4D-0B', port: 2, element: document.getElementById('host-B') },
                'C': { mac: '00-1A-2B-3C-4D-0C', port: 3, element: document.getElementById('host-C') },
                'D': { mac: '00-1A-2B-3C-4D-0D', port: 4, element: document.getElementById('host-D') }
            };

            const switchBox = document.getElementById('switch-box');
            const macTableBody = document.getElementById('mac-table-body');
            const logContainer = document.getElementById('simulation-log');
            const sendBtn = document.getElementById('send-frame-btn');
            const resetBtn = document.getElementById('reset-sim-btn');
            const sourceSelect = document.getElementById('source-host');
            const destSelect = document.getElementById('dest-host');
            const diagram = document.getElementById('simulation-diagram');
            const svgLines = document.getElementById('lines-svg');
            
            let macTable = {};
            let logCounter = 1;

            function initSimulation() {
                macTable = {};
                logCounter = 1;
                updateMacTableDisplay();
                logContainer.innerHTML = '<p class="text-gray-500">æ¨¡æ‹Ÿå·²é‡ç½®ã€‚ç­‰å¾…æ“ä½œ...</p>';
                drawLines();
                
                // Set initial unique options for dropdowns
                if (sourceSelect.value === destSelect.value) {
                    destSelect.value = (destSelect.selectedIndex + 1) % destSelect.options.length;
                    if (destSelect.value === sourceSelect.value) {
                         destSelect.value = (destSelect.selectedIndex + 1) % destSelect.options.length;
                    }
                    destSelect.value = destSelect.options[destSelect.selectedIndex].value;
                }
            }
            
            function drawLines() {
                svgLines.innerHTML = ''; // Clear existing lines
                const switchRect = switchBox.getBoundingClientRect();
                const diagramRect = diagram.getBoundingClientRect();

                const switchCenterX = switchRect.left - diagramRect.left + switchRect.width / 2;
                const switchCenterY = switchRect.top - diagramRect.top + switchRect.height / 2;
                
                Object.values(hosts).forEach(host => {
                    const hostRect = host.element.getBoundingClientRect();
                    const hostCenterX = hostRect.left - diagramRect.left + hostRect.width / 2;
                    const hostCenterY = hostRect.top - diagramRect.top + hostRect.height / 2;
                    
                    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                    line.setAttribute('x1', switchCenterX);
                    line.setAttribute('y1', switchCenterY);
                    line.setAttribute('x2', hostCenterX);
                    line.setAttribute('y2', hostCenterY);
                    line.setAttribute('stroke', '#94a3b8'); // slate-400
                    line.setAttribute('stroke-width', '2');
                    svgLines.appendChild(line);

                    // Add port numbers to switch
                    const portLabel = document.createElement('div');
                    portLabel.className = 'absolute text-xs font-bold text-slate-700';
                    portLabel.textContent = host.port;
                    
                    const dx = hostCenterX - switchCenterX;
                    const dy = hostCenterY - switchCenterY;
                    const angle = Math.atan2(dy, dx);
                    
                    // Position port labels on the edge of the switch box
                    const radiusX = switchRect.width/2 + 10;
                    const radiusY = switchRect.height/2 + 10;
                    portLabel.style.left = `${switchCenterX + radiusX * Math.cos(angle) - 4}px`;
                    portLabel.style.top = `${switchCenterY + radiusY * Math.sin(angle) - 8}px`;

                    diagram.appendChild(portLabel);
                });
            }


            function logEvent(message, type = 'info') {
                if (logCounter === 1 && logContainer.querySelector('.text-gray-500')) {
                    logContainer.innerHTML = '';
                }
                const colors = {
                    info: 'text-sky-300',
                    learn: 'text-green-300',
                    forward: 'text-yellow-300',
                    broadcast: 'text-orange-300',
                    drop: 'text-red-300'
                };
                const logEntry = document.createElement('p');
                logEntry.className = `log-entry ${colors[type]}`;
                logEntry.innerHTML = `<span class="text-gray-400">${logCounter++}.</span> ${message}`;
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }

            function updateMacTableDisplay() {
                macTableBody.innerHTML = '';
                if (Object.keys(macTable).length === 0) {
                     macTableBody.innerHTML = '<tr><td colspan="2" class="py-2 px-3 text-center text-slate-500">è¡¨æ˜¯ç©ºçš„</td></tr>';
                } else {
                    for (const mac in macTable) {
                        const row = `
                            <tr class="log-entry">
                                <td class="py-2 px-3 border-t border-slate-200">${mac}</td>
                                <td class="py-2 px-3 border-t border-slate-200">${macTable[mac]}</td>
                            </tr>`;
                        macTableBody.innerHTML += row;
                    }
                }
            }
            
            function animateFrame(fromHost, toHosts, isBroadcast) {
                const startElem = (fromHost === 'SWITCH') ? switchBox : hosts[fromHost].element;
                
                toHosts.forEach(toHost => {
                    const endElem = toHost === 'SWITCH' ? switchBox : hosts[toHost].element;
                    const frame = document.createElement('div');
                    frame.className = 'frame-animation';
                    frame.textContent = 'âœ‰ï¸';
                    diagram.appendChild(frame);
                    
                    const startRect = startElem.getBoundingClientRect();
                    const endRect = endElem.getBoundingClientRect();
                    const diagramRect = diagram.getBoundingClientRect();

                    const startX = startRect.left - diagramRect.left + startRect.width / 2;
                    const startY = startRect.top - diagramRect.top + startRect.height / 2;
                    const endX = endRect.left - diagramRect.left + endRect.width / 2;
                    const endY = endRect.top - diagramRect.top + endRect.height / 2;
                    
                    frame.style.left = `${startX}px`;
                    frame.style.top = `${startY}px`;
                    frame.style.opacity = '1';

                    setTimeout(() => {
                        frame.style.left = `${endX}px`;
                        frame.style.top = `${endY}px`;
                        if(isBroadcast) frame.style.backgroundColor = '#f97316'; // orange-500 for broadcast
                    }, 100);

                    setTimeout(() => {
                        frame.style.opacity = '0';
                        setTimeout(() => frame.remove(), 500);
                    }, 1100);
                });
            }

            sendBtn.addEventListener('click', () => {
                const source = sourceSelect.value;
                const dest = destSelect.value;

                if (source === dest) {
                    alert('æºä¸»æœºå’Œç›®çš„ä¸»æœºä¸èƒ½ç›¸åŒ!');
                    return;
                }

                const sourceHost = hosts[source];
                const destHost = hosts[dest];

                logEvent(`ä¸»æœº ${source} å‘é€ä¸€ä¸ªæ•°æ®å¸§ç»™ä¸»æœº ${dest}ã€‚`, 'info');
                
                // Animate frame from source to switch
                animateFrame(source, ['SWITCH']);

                setTimeout(() => {
                    // Step 1: Switch learns the source MAC address
                    if (!macTable[sourceHost.mac] || macTable[sourceHost.mac] !== sourceHost.port) {
                        macTable[sourceHost.mac] = sourceHost.port;
                        logEvent(`äº¤æ¢æœºä»æ¥å£ ${sourceHost.port} å­¦ä¹ åˆ°ä¸»æœº ${source} çš„MACåœ°å€ã€‚`, 'learn');
                        updateMacTableDisplay();
                    }

                    // Step 2: Switch decides where to forward the frame
                    if (macTable[destHost.mac]) {
                        // Unicast: Destination MAC is in the table
                        const destPort = macTable[destHost.mac];
                        logEvent(`åœ¨MACåœ°å€è¡¨ä¸­æ‰¾åˆ°ä¸»æœº ${dest}ï¼Œä»æ¥å£ ${destPort} è¿›è¡Œå•æ’­è½¬å‘ã€‚`, 'forward');
                        animateFrame('SWITCH', [dest]);
                    } else {
                        // Broadcast (Flooding): Destination MAC is not in the table
                        logEvent(`æœªåœ¨MACåœ°å€è¡¨ä¸­æ‰¾åˆ°ä¸»æœº ${dest}ï¼Œå‘é™¤æºæ¥å£å¤–çš„æ‰€æœ‰æ¥å£å¹¿æ’­ (æ³›æ´ª)ã€‚`, 'broadcast');
                        const broadcastTargets = Object.keys(hosts).filter(h => h !== source);
                        animateFrame('SWITCH', broadcastTargets, true);
                        
                        Object.keys(hosts).forEach(hostname => {
                            if (hostname !== source && hostname !== dest) {
                                logEvent(`ä¸»æœº ${hostname} æ”¶åˆ°å¹¿æ’­å¸§ï¼Œä½†å› ç›®çš„åœ°å€ä¸åŒ¹é…è€Œä¸¢å¼ƒã€‚`, 'drop');
                            }
                        });
                        logEvent(`ä¸»æœº ${dest} æ”¶åˆ°å¹¿æ’­å¸§å¹¶æ¥æ”¶ã€‚`);
                    }
                }, 1200);
            });

            resetBtn.addEventListener('click', initSimulation);
            
            sourceSelect.addEventListener('change', () => {
                if (sourceSelect.value === destSelect.value) {
                    destSelect.selectedIndex = (destSelect.selectedIndex + 1) % destSelect.options.length;
                }
            });

            destSelect.addEventListener('change', () => {
                if (sourceSelect.value === destSelect.value) {
                    sourceSelect.selectedIndex = (sourceSelect.selectedIndex + 1) % sourceSelect.options.length;
                }
            });


            // Initial setup
            // Add host elements to the simulation diagram dynamically
            const hostPositions = {
                'A': { top: '15%', left: '10%' },
                'B': { top: '15%', right: '10%' },
                'C': { bottom: '15%', left: '10%' },
                'D': { bottom: '15%', right: '10%' }
            };

            Object.keys(hosts).forEach(name => {
                const hostDiv = document.createElement('div');
                hostDiv.id = `host-${name}`;
                hostDiv.className = 'absolute flex items-center justify-center w-16 h-16 bg-white rounded-full shadow-md border-2 border-slate-300 flex-col text-sm';
                hostDiv.style.top = hostPositions[name].top;
                hostDiv.style.left = hostPositions[name].left;
                hostDiv.style.right = hostPositions[name].right;
                hostDiv.style.bottom = hostPositions[name].bottom;
                hostDiv.innerHTML = `<span class="text-3xl">ğŸ’»</span><span class="font-bold">${name}</span>`;
                hosts[name].element = hostDiv;
                diagram.appendChild(hostDiv);
            });
            
            initSimulation();
            window.addEventListener('resize', drawLines);

        });
    </script>

</body>
</html>
