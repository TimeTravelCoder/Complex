<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>大数据技术学习笔记</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "Helvetica Neue", Helvetica, Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px 40px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        h1, h2, h3, h4 {
            color: #0056b3;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
            margin-top: 1.5em;
            margin-bottom: 1em;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            border-bottom: 3px solid #0056b3;
        }
        h2 {
            font-size: 2em;
        }
        h3 {
            font-size: 1.6em;
            border-bottom: 1px dashed #ced4da;
        }
        h4 {
            font-size: 1.3em;
            color: #007bff;
            border-bottom: none;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px 15px;
            text-align: left;
        }
        th {
            background-color: #0056b3;
            color: #ffffff;
            font-weight: bold;
        }
        tbody tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tbody tr:hover {
            background-color: #e9ecef;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        strong, .highlight {
            color: #d9534f;
            font-weight: bold;
        }
        pre {
            background-color: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: "Courier New", Courier, monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }
        code {
            font-family: "Courier New", Courier, monospace;
        }
        blockquote {
            border-left: 5px solid #007bff;
            background-color: #e9f7ff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>大数据技术学习笔记</h1>
        <p>本文档是根据《大数据技术》系列课程PPT整理的学习笔记，涵盖了从大数据基本概念到核心框架（Hadoop、HDFS、HBase）及数据仓库工具（Hive）的知识。</p>

        <h2>第1章 大数据概述</h2>
        
        <h3>1.1 信息化浪潮与大数据时代</h3>
        <h4>三次信息化浪潮</h4>
        <p>根据IBM前CEO郭士纳的观点，IT领域约每15年迎来一次重大变革。</p>
        <table>
            <thead>
                <tr>
                    <th>信息化浪潮</th>
                    <th>发生时间</th>
                    <th>标志</th>
                    <th>解决问题</th>
                    <th>代表企业</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>第一次浪潮</strong></td>
                    <td>1980年前后</td>
                    <td>个人计算机</td>
                    <td>信息处理</td>
                    <td>Intel, AMD, IBM, 苹果, 微软等</td>
                </tr>
                <tr>
                    <td><strong>第二次浪潮</strong></td>
                    <td>1995年前后</td>
                    <td>互联网</td>
                    <td>信息传输</td>
                    <td>雅虎, 谷歌, 阿里巴巴, 百度, 腾讯等</td>
                </tr>
                <tr>
                    <td><strong>第三次浪潮</strong></td>
                    <td>2010年前后</td>
                    <td>物联网、云计算、大数据</td>
                    <td>信息爆炸</td>
                    <td>Facebook, 亚马逊, 美团, 今日头条, 滴滴等</td>
                </tr>
            </tbody>
        </table>

        <h4>技术支撑</h4>
        <ul>
            <li><strong>存储设备容量不断增加</strong>：存储价格随时间推移呈指数级下降。</li>
            <li><strong>CPU处理能力大幅提升</strong>：CPU晶体管数量遵循摩尔定律，呈指数级增长。</li>
            <li><strong>网络带宽不断增加</strong>：为海量数据的传输提供了可能。</li>
        </ul>

        <h4>数据产生方式的变革</h4>
        <ol>
            <li><strong>运营式系统阶段</strong>：数据由运营活动被动产生，如数据库记录。</li>
            <li><strong>用户原创内容阶段</strong>：Web 2.0时代，用户成为数据的主要生产者，数据产生方式转为主动。</li>
            <li><strong>感知式系统阶段</strong>：物联网（IoT）、智能设备等广泛使用，导致数据量飞跃式增长。</li>
        </ol>

        <h3>1.2 大数据的发展历程</h3>
        <table>
            <thead>
                <tr>
                    <th>阶段</th>
                    <th>时间</th>
                    <th>内容</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>第一阶段：萌芽期</strong></td>
                    <td>上世纪90年代至本世纪初</td>
                    <td>数据挖掘、数据库技术成熟，数据仓库、专家系统等商业智能工具开始应用。</td>
                </tr>
                <tr>
                    <td><strong>第二阶段：成熟期</strong></td>
                    <td>本世纪前十年</td>
                    <td>Web 2.0应用产生海量非结构化数据，催生了以<strong>GFS</strong>和<strong>MapReduce</strong>为代表的并行计算与分布式系统技术，<strong>Hadoop</strong>平台应运而生。</td>
                </tr>
                <tr>
                    <td><strong>第三阶段：大规模应用期</strong></td>
                    <td>2010年以后</td>
                    <td>大数据应用渗透各行各业，数据驱动决策成为主流，社会智能化程度大幅提升。</td>
                </tr>
            </tbody>
        </table>

        <h3>1.3 大数据的4V特性</h3>
        <p>大数据不仅仅是数据量大，其核心特性包括：</p>
        <ul>
            <li><strong>Volume (大量化)</strong>：数据规模巨大，通常达到TB、PB甚至EB级别。</li>
            <li><strong>Velocity (快速化)</strong>：数据产生和处理速度快，要求实时或准实时响应。</li>
            <li><strong>Variety (多样化)</strong>：数据类型繁多，包括结构化、半结构化和非结构化数据。</li>
            <li><strong>Value (价值密度低)</strong>：单条数据价值不高，但海量数据经过分析后能产生巨大价值。</li>
        </ul>
        
        <h3>1.4 大数据的影响</h3>
        <h4>科研范式的变革</h4>
        <p>科学研究历经了四种范式：</p>
        <ol>
            <li><strong>实验科学</strong>（几千年前）</li>
            <li><strong>理论科学</strong>（近几百年）</li>
            <li><strong>计算科学</strong>（近几十年）</li>
            <li><strong>数据密集型科学（数据科学）</strong>（现在）</li>
        </ol>

        <h4>思维方式的颠覆</h4>
        <ul>
            <li><strong>全样而非抽样</strong>：分析所有数据，而非样本。</li>
            <li><strong>效率而非精确</strong>：容忍不确定性和不精确性，追求快速获得价值。</li>
            <li><strong>相关而非因果</strong>：更关注事物之间的相关关系，而非探究因果关系。</li>
        </ul>

        <h3>1.5 大数据关键技术</h3>
        <h4>两大核心技术</h4>
        <ol>
            <li><strong>分布式存储</strong>：解决海量数据的存储问题。代表技术：GFS/HDFS, BigTable/HBase, NoSQL, NewSQL。</li>
            <li><strong>分布式处理</strong>：解决海量数据的计算问题。代表技术：MapReduce。</li>
        </ol>

        <h4>技术层面与功能</h4>
        <table>
            <thead>
                <tr>
                    <th>技术层面</th>
                    <th>功能</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>数据采集</strong></td>
                    <td>使用ETL等工具从异构数据源抽取、转换、加载数据，或实时采集流数据。</td>
                </tr>
                <tr>
                    <td><strong>数据存储和管理</strong></td>
                    <td>使用分布式文件系统、数据仓库、NoSQL数据库等存储和管理各类海量数据。</td>
                </tr>
                <tr>
                    <td><strong>数据处理与分析</strong></td>
                    <td>使用分布式并行计算框架（如MapReduce）结合机器学习算法处理和分析数据。</td>
                </tr>
                <tr>
                    <td><strong>数据隐私和安全</strong></td>
                    <td>构建数据保护体系，确保个人隐私和数据安全。</td>
                </tr>
            </tbody>
        </table>

        <h3>1.6 大数据计算模式</h3>
        <table>
            <thead>
                <tr>
                    <th>大数据计算模式</th>
                    <th>解决问题</th>
                    <th>代表产品</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>批处理计算</strong></td>
                    <td>针对大规模数据的批量处理</td>
                    <td><strong>MapReduce</strong>、<strong>Spark</strong>等</td>
                </tr>
                <tr>
                    <td><strong>流计算</strong></td>
                    <td>针对流数据的实时计算</td>
                    <td>Flink、Storm、DStream等</td>
                </tr>
                <tr>
                    <td><strong>图计算</strong></td>
                    <td>针对大规模图结构数据的处理</td>
                    <td>Pregel、GraphX、Giraph等</td>
                </tr>
                <tr>
                    <td><strong>查询分析计算</strong></td>
                    <td>大规模数据的存储管理和查询分析</td>
                    <td>Dremel、<strong>Hive</strong>、Cassandra、Impala等</td>
                </tr>
            </tbody>
        </table>

        <h3>1.7 云计算与大数据的关系</h3>
        <blockquote>
            <ul>
                <li><strong>云计算为大数据提供技术基础</strong>（计算和存储能力）。</li>
                <li><strong>大数据为云计算提供用武之地</strong>（应用场景）。</li>
                <li><strong>物联网是大数据的重要来源</strong>，其数据分析需要大数据技术和云计算平台支撑。</li>
            </ul>
        </blockquote>

        <h2>第2章 大数据处理架构Hadoop</h2>
        <h3>2.1 Hadoop 简介与特性</h3>
        <p><strong>简介</strong>：Hadoop是Apache基金会下的开源分布式计算平台，为用户提供了底层细节透明的分布式基础架构。</p>
        <ul>
            <li>基于<strong>Java</strong>开发，具有良好的跨平台性。</li>
            <li>核心是 <span class="highlight">HDFS</span> (分布式文件系统) 和 <span class="highlight">MapReduce</span> (分布式计算框架)。</li>
            <li>被公认为行业大数据标准开源软件。</li>
        </ul>
        <p><strong>特性</strong>：高可靠性、高效性、高可扩展性、高容错性、成本低。</p>

        <h3>2.2 Hadoop 版本演变</h3>
        <ul>
            <li><strong>Hadoop 1.0</strong>：HDFS (存储) + MapReduce (计算+资源管理)。</li>
            <li><strong>Hadoop 2.0</strong>：HDFS (存储) + <span class="highlight">YARN</span> (资源管理) + MapReduce (运行在YARN上的计算框架)。</li>
        </ul>

        <h3>2.3 伪分布式安装配置 (实验步骤)</h3>
        <ol>
            <li><strong>修改配置文件</strong>: <code>core-site.xml</code>, <code>hdfs-site.xml</code>, <code>mapred-site.xml</code>。</li>
            <li><strong>初始化文件系统</strong>: <code>hadoop namenode -format</code></li>
            <li><strong>启动所有进程</strong>: <code>start-all.sh</code></li>
            <li><strong>访问web界面</strong>: 查看Hadoop信息。</li>
            <li><strong>运行实例</strong>。</li>
        </ol>
        <h4>三种Shell命令方式的区别</h4>
        <ul>
            <li><code>hadoop fs</code>: 适用于任何文件系统（如本地文件系统和HDFS）。</li>
            <li><code>hadoop dfs</code>: <strong>只能</strong>适用于HDFS文件系统（已过时）。</li>
            <li><code>hdfs dfs</code>: 与<code>hadoop dfs</code>作用相同，是推荐使用的方式。</li>
        </ul>

        <h3>2.4 Hadoop 集群节点类型 (Hadoop 1.x)</h3>
        <ul>
            <li><strong>NameNode</strong>: 主节点，负责协调集群数据存储，管理文件系统的元数据。</li>
            <li><strong>DataNode</strong>: 从节点，负责存储被拆分的数据块。</li>
            <li><strong>JobTracker</strong>: 主节点，负责协调数据计算任务。</li>
            <li><strong>TaskTracker</strong>: 从节点，负责执行JobTracker指派的具体任务。</li>
            <li><strong>SecondaryNameNode</strong>: 辅助NameNode，定期合并FsImage和EditLog，防止EditLog过大。</li>
        </ul>

        <h2>第3章 分布式文件系统HDFS</h2>
        <h3>3.1 HDFS 核心概念</h3>
        <h4>设计目标与局限性</h4>
        <ul>
            <li><strong>目标</strong>：兼容廉价硬件、流式数据读写、支持大数据集、简单的文件模型。</li>
            <li><strong>局限性</strong>：
                <ul>
                    <li><strong>不适合低延迟数据访问</strong>。</li>
                    <li><strong>无法高效存储大量小文件</strong>。</li>
                    <li><strong>不支持多用户写入及任意修改文件</strong>（只支持追加）。</li>
                </ul>
            </li>
        </ul>
        
        <h3>3.2 HDFS 架构与工作原理</h3>
        <ul>
            <li><strong>块 (Block)</strong>：HDFS中文件存储的基本单位，默认64MB或128MB。</li>
            <li><strong>NameNode (名称节点)</strong>：管理文件系统的元数据（FsImage 和 EditLog）。</li>
            <li><strong>SecondaryNameNode (第二名称节点)</strong>：
                <p><strong>作用</strong>：解决NameNode重启时EditLog过大导致启动缓慢的问题。它<strong>不是</strong>NameNode的热备份。</p>
                <p><strong>工作流程（Checkpoint）</strong>：定期从NameNode获取FsImage和EditLog，在本地合并成新的FsImage，然后发回给NameNode，以减小EditLog的大小。</p>
            </li>
        </ul>

        <h3>3.3 HDFS 的局限性</h3>
        <ul>
            <li><strong>命名空间的限制</strong>：NameNode内存大小限制了文件和块的总数。</li>
            <li><strong>性能的瓶颈</strong>：整个系统的吞吐量受限于单个NameNode的性能。</li>
            <li><strong>隔离问题</strong>：单个命名空间无法对不同应用程序进行隔离。</li>
            <li><strong>集群的可用性</strong>：NameNode是单点故障（SPOF）。</li>
        </ul>

        <h3>3.4 数据冗余与可靠性</h3>
        <p>HDFS通过将每个数据块复制多份（默认为3份）并存储在不同DataNode上，来保证数据容错性和可用性。</p>

        <h3>3.5 HDFS 常用命令 (实例)</h3>
        <h4>创建文件夹与查看文件信息</h4>
        <pre><code>hadoop@ubuntu:/usr/local/hadoop$ ./bin/hadoop fs -mkdir hdfs://localhost:9000/tempDir
hadoop@ubuntu:/usr/local/hadoop$ ./bin/hadoop fs -ls hdfs://localhost:9000/
Found 6 items
drwxr-xr-x   - hadoop supergroup          0 2020-02-06 10:04 hdfs://localhost:9000/bigdatacase
drwxr-xr-x   - hadoop supergroup          0 2020-02-19 19:39 hdfs://localhost:9000/hbase
drwxr-xr-x   - hadoop supergroup          0 2020-02-27 10:57 hdfs://localhost:9000/tempDir
drwx-wx-wx   - hadoop supergroup          0 2020-01-30 09:38 hdfs://localhost:9000/tmp
drwxr-xr-x   - hadoop supergroup          0 2020-01-30 19:13 hdfs://localhost:9000/user
drwxr-xr-x   - hadoop supergroup          0 2020-01-30 19:21 hdfs://localhost:9000/usr</code></pre>

        <h4>上传文件与查看文件内容</h4>
        <pre><code>hadoop@ubuntu:/usr/local/hadoop$ ./bin/hadoop fs -copyFromLocal /home/hadoop/mergefile/* hdfs://localhost:9000/tempDir

hadoop@ubuntu:/usr/local/hadoop$ ./bin/hadoop fs -cat hdfs://localhost:9000/tempDir/*
2020-02-27 11:08:25,938 INFO sasl.SaslDataTransferClient: SASL encryption trust check: localHostTrusted = false, remoteHostTrusted = false
this is file1.txt
this is file2.txt
this is file3.txt
this is file4.abc
this is file5.abc</code></pre>

        <h2>第4章 分布式数据库HBase</h2>
        <h3>4.1 HBase 简介</h3>
        <p>HBase是一个<strong>高可靠、高性能、面向列、可伸缩</strong>的分布式数据库，是Google <strong>BigTable</strong>的开源实现。主要用于存储海量的<strong>非结构化和半结构化</strong>数据。</p>
        
        <h3>4.2 HBase 与传统数据库对比</h3>
        <table>
            <thead>
                <tr>
                    <th>对比方面</th>
                    <th>传统关系数据库 (RDBMS)</th>
                    <th>HBase</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>数据类型</strong></td>
                    <td>丰富的数据类型，强模式</td>
                    <td>只有字符串，数据无类型，弱模式</td>
                </tr>
                <tr>
                    <td><strong>数据操作</strong></td>
                    <td>复杂的SQL操作，支持多表连接</td>
                    <td>简单的CRUD操作，无表连接</td>
                </tr>
                <tr>
                    <td><strong>存储模式</strong></td>
                    <td><strong>行式存储</strong></td>
                    <td><strong>列式存储</strong>（每个列族一个文件）</td>
                </tr>
                <tr>
                    <td><strong>数据索引</strong></td>
                    <td>可对多列构建复杂索引</td>
                    <td>只有<strong>行键 (Row Key)</strong> 一个索引</td>
                </tr>
                <tr>
                    <td><strong>数据维护</strong></td>
                    <td>更新操作是原地替换旧值</td>
                    <td>更新操作是生成新版本，保留旧版本</td>
                </tr>
                <tr>
                    <td><strong>可伸缩性</strong></td>
                    <td>纵向扩展为主，横向扩展困难</td>
                    <td>专为水平扩展设计，伸缩性极好</td>
                </tr>
            </tbody>
        </table>
        
        <h3>4.3 HBase 数据模型</h3>
        <p>HBase是一个稀疏、多维度、排序的映射表，其索引是 <strong>(行键, 列族, 列限定符, 时间戳)</strong>。</p>
        <ul>
            <li><strong>行键 (Row Key)</strong>：表中每行的唯一标识，数据按行键的字典序排序。</li>
            <li><strong>列族 (Column Family)</strong>：多个列的集合，在表定义时预先声明。</li>
            <li><strong>列限定符 (Column Qualifier)</strong>：列族下的具体列名，可动态添加。</li>
            <li><strong>时间戳 (Timestamp)</strong>：数据版本号，用于支持多版本。</li>
        </ul>
        
        <h3>4.4 HBase 架构与组件</h3>
        <h4>三层数据寻址结构</h4>
        <table>
            <thead>
                <tr>
                    <th>层次</th>
                    <th>名称</th>
                    <th>作用</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>第一层</strong></td>
                    <td>Zookeeper文件</td>
                    <td>记录了 <strong>-ROOT-</strong> 表的位置信息。</td>
                </tr>
                <tr>
                    <td><strong>第二层</strong></td>
                    <td><strong>-ROOT-</strong> 表</td>
                    <td>记录了 <strong>.META.</strong> 表的Region位置信息。</td>
                </tr>
                <tr>
                    <td><strong>第三层</strong></td>
                    <td><strong>.META.</strong> 表</td>
                    <td>记录了所有用户数据表的Region位置信息。</td>
                </tr>
            </tbody>
        </table>

        <h2>第9章 数据仓库分析工具Hive</h2>
        <h3>9.1 Hive 简介</h3>
        <p><strong>Hive</strong>：基于Hadoop的数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供类SQL的查询功能（<span class="highlight">HiveQL</span>），本质上是将HiveQL转换为<span class="highlight">MapReduce</span>任务来执行。</p>

        <h3>9.2 Hive 与 Hadoop 生态圈的关系</h3>
        <ul>
            <li><strong>依赖HDFS</strong>：Hive的数据存储在HDFS上。</li>
            <li><strong>依赖MapReduce</strong>：Hive的查询逻辑最终会转化为MapReduce任务。</li>
            <li><strong>与HBase的关系</strong>：HBase提供<strong>实时</strong>数据访问，而Hive主要进行<strong>批处理</strong>分析，两者功能互补。</li>
        </ul>

        <h3>9.3 Hive 与传统数据库对比</h3>
        <table>
            <thead>
                <tr>
                    <th>对比项目</th>
                    <th>Hive</th>
                    <th>传统数据库</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>数据插入</strong></td>
                    <td>支持批量导入</td>
                    <td>支持单条和批量导入</td>
                </tr>
                <tr>
                    <td><strong>数据更新</strong></td>
                    <td><strong>不支持</strong>（新版本支持有限的ACID）</td>
                    <td>支持</td>
                </tr>
                <tr>
                    <td><strong>索引</strong></td>
                    <td>支持（但功能有限）</td>
                    <td>支持（功能强大）</td>
                </tr>
                <tr>
                    <td><strong>执行延迟</strong></td>
                    <td><strong>高</strong>（基于MapReduce）</td>
                    <td><strong>低</strong></td>
                </tr>
                <tr>
                    <td><strong>扩展性</strong></td>
                    <td><strong>好</strong>（基于Hadoop）</td>
                    <td>有限</td>
                </tr>
            </tbody>
        </table>

        <h3>9.4 HiveQL 查询执行过程</h3>
        <p>Hive将一个SQL查询转换为MapReduce作业的详细过程如下：</p>
        <ol>
            <li><strong>用户提交查询</strong>：通过CLI或其他工具提交HiveQL。</li>
            <li><strong>解析 (Parsing)</strong>：编译器（<strong>Antlr</strong>）生成<strong>抽象语法树 (AST Tree)</strong>。</li>
            <li><strong>语义分析 (Semantic Analysis)</strong>：将AST转化为<strong>查询块 (QueryBlock)</strong>。</li>
            <li><strong>生成逻辑计划 (Logical Plan)</strong>：将QueryBlock转化为<strong>操作树 (OperatorTree)</strong>。</li>
            <li><strong>逻辑优化 (Logical Optimization)</strong>：优化OperatorTree，合并操作符。</li>
            <li><strong>生成物理计划 (Physical Plan)</strong>：将OperatorTree转化为<strong>MapReduce任务</strong>。</li>
            <li><strong>物理优化 (Physical Optimization)</strong>：优化MapReduce任务，生成最终的<strong>任务执行计划</strong>。</li>
            <li><strong>执行 (Execution)</strong>：将任务提交到Hadoop集群上执行。</li>
        </ol>
    </div>
</body>
</html>